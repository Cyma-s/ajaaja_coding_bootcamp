#include<vector>
using namespace std;

typedef vector<int> vi;
typedef long long ll;

#define nn (1<<17)

void update( int x, int d, vi &tree ){
    tree[x] += d;
    if( x ) {
        update( x/2, d, tree );
    }
}
int find( int x, int l, int r, int k, vi &tree ){
    if( l==r ){
        return l;
    }
    if( tree[x*2] < k ) {
        return find(x*2+1,(l+r)/2+1,r,k-tree[x*2],tree);
    }
    return find(x*2,l,(l+r)/2,k,tree);
}
int main(){
    int n, k;
    ll result = 0;
    scanf("%d%d",&n,&k);
    vi tree(nn*2), a(n);
    for( int i=0; i<n; i++ ){
        scanf("%d",&a[i]);
        update( nn+a[i], 1, tree );
        if( i<k-1 ) {
            continue;
        }
        result += ll( find(1,0,nn-1,(k+1)/2,tree) );
        update( nn+a[i-k+1], -1, tree );
    }
    printf("%lld",result);
    return 0;
}